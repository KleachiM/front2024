@startuml
hide empty description

[*] --> Операция : "+,-,/,*"

[*] --> СкобкаОткрыта : "("/Счетчик++

[*] --> Ошибка : other


СкобкаОткрыта --> Операция : "+,-,/,*"

СкобкаОткрыта -> СкобкаОткрыта : "("/Счетчик++

СкобкаОткрыта --> Ошибка : other


Операция --> Операнд1 : Число

Операция --> СкобкаОткрыта : "("

Операция -> Ошибка : other


Операнд1 -> Операнд2 : Число

Операнд1 --> СкобкаОткрыта : "("

Операнд1 -> Операция : "+,-,/,*"

Операнд1 --> Ошибка : other


Операнд2 -> [*] : Конец и Счетчик == 0

Операнд2 --> СкобкаЗакрыта : ")"/Счетчик--

Операнд2 --> Ошибка : other


СкобкаЗакрыта -> СкобкаЗакрыта : ")"/Счетчик--

СкобкаЗакрыта --> [*] : Конец и Счетчик == 0

СкобкаЗакрыта --> Операнд2 : Число и Счетчик >= 0

СкобкаЗакрыта --> СкобкаОткрыта : "(" и Счетчик >= 0 и НеКонец / Счетчик++

СкобкаЗакрыта --> Ошибка : Счетчик < 0 и other

@enduml